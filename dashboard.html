<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  
  <title>Trang qu·∫£n tr·ªã HFTA</title>
  <link rel="stylesheet" href="style.css" />
  <script type="module">
    // Import c√°c h√†m b·∫°n c·∫ßn t·ª´ SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    // Th√™m import cho Authentication
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    // Your web app's Firebase configuration
    // (ƒê√¢y l√† config b·∫°n ƒë√£ cung c·∫•p)
    const firebaseConfig = {
        apiKey: "AIzaSyBfu2qVSLiTIaf2xUwVUw0AzROtE5YS8Tc",
        authDomain: "hfta-a1cdc.firebaseapp.com",
        projectId: "hfta-a1cdc",
        storageBucket: "hfta-a1cdc.firebasestorage.app",
        messagingSenderId: "715501206681",
        appId: "1:715501206681:web:5bb1a8076e8828d0accc08"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // L·∫•y d·ªãch v·ª• Auth
    const auth = getAuth(app);

    // ƒê√¢y l√† "ng∆∞·ªùi g√°c c·ªïng"
    onAuthStateChanged(auth, user => {
        if (!user) {
            // N·∫øu kh√¥ng c√≥ ng∆∞·ªùi d√πng n√†o ƒëang ƒëƒÉng nh·∫≠p, ƒë·∫©y v·ªÅ trang login
            console.log("Ch∆∞a ƒëƒÉng nh·∫≠p, chuy·ªÉn v·ªÅ index.html");
            window.location.href = 'index.html';
        } else {
            // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, cho ph√©p ·ªü l·∫°i v√† t·∫£i script c·ªßa dashboard
            console.log("ƒê√£ ƒëƒÉng nh·∫≠p:", user.email);
            loadDashboardScripts(); // T·∫£i c√°c script c·∫ßn thi·∫øt
        }
    });

    // H√†m n√†y s·∫Ω t·∫£i c√°c script th∆∞ vi·ªán V√Ä script.js c·ªßa b·∫°n
    // SAU KHI ƒëƒÉng nh·∫≠p th√†nh c√¥ng
    function loadDashboardScripts() {
        const scripts = [
            "https://cdn.jsdelivr.net/npm/chart.js",
            "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",
            "script.js" // T·∫£i script ch√≠nh c·ªßa b·∫°n CU·ªêI C√ôNG
        ];

        let loadedCount = 0;
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.body.appendChild(script);
            });
        }

        // T·∫£i c√°c script tu·∫ßn t·ª± ƒë·ªÉ ƒë·∫£m b·∫£o script.js ch·∫°y sau c√πng
        async function loadAll() {
            await loadScript(scripts[0]); // T·∫£i Chart.js
            await loadScript(scripts[1]); // T·∫£i jsPDF
            await loadScript(scripts[2]); // T·∫£i script.js
            console.log("ƒê√£ t·∫£i t·∫•t c·∫£ script c·ªßa dashboard.");
        }
        
        loadAll();
    }
  </script>
</head>
<body>

  <header class="navbar">
    <div class="nav-left">
      <img src="logo.png" alt="Logo" class="nav-logo" />
      
      <h1>Hanoi Center for Financial and Technology Analytics</h1>
    </div>
    <nav class="nav-menu">
      <button class="tab active" data-tab="overview">T·ªïng quan</button>
      <button class="tab" data-tab="quant">Quant AI</button>
      <button class="tab" data-tab="sentiment">Sentiment AI</button>
      <button class="tab" data-tab="risk">R·ªßi ro</button>
      <button class="tab" data-tab="macro">Vƒ© m√¥</button>
      <button class="tab" data-tab="advisor">C·ªë v·∫•n</button>
      <button class="tab" data-tab="console">AI Console</button>
      <button class="tab" data-tab="report">B√°o c√°o</button>
    </nav>
  </header>

  <main id="content">

    <section id="overview" class="tab-content active">
      <h2>üìä T·ªïng quan h·ªá th·ªëng</h2>
      <div class="cards">
        <div class="card">
          <h3>Gi√° BTC hi·ªán t·∫°i</h3>
          <p class="big-number">$67,430</p>
          <small>+1.24% trong 24h</small>
        </div>
        <div class="card">
          <h3>ƒê·ªô tin c·∫≠y t·ªïng h·ª£p</h3>
          <p class="big-number">82%</p>
          <small>ƒê√°nh gi√° b·ªüi 4 Ban AI</small>
        </div>
        <div class="card">
          <h3>Khuy·∫øn ngh·ªã cu·ªëi</h3>
          <p class="big-number">LONG 20%</p>
          <small>Theo Kelly Criterion</small>
        </div>
      </div>
    </section>

    <section id="quant" class="tab-content">
      <h2>üìà Quant AI ‚Äì Ph√¢n t√≠ch k·ªπ thu·∫≠t</h2>
      <p>AI nh·∫≠n ƒë·ªãnh xu h∆∞·ªõng tƒÉng trung h·∫°n, RSI = 58, MA50 > MA200.</p>
      <div class="chart-box">
        <canvas id="quantChart"></canvas>
      </div>
    </section>

    <section id="sentiment" class="tab-content">
      <h2>üí¨ Sentiment AI ‚Äì T√¢m l√Ω th·ªã tr∆∞·ªùng</h2>
      <p>Twitter: FOMO nh·∫π, Reddit: Trung l·∫≠p. ƒêi·ªÉm c·∫£m x√∫c: <strong>63/100</strong></p>
      <div class="card sentiment-meter">
        <div class="fill" style="width:63%"></div>
      </div>
    </section>

    <section id="risk" class="tab-content">
      <h2>‚ö†Ô∏è Risk AI ‚Äì Qu·∫£n tr·ªã r·ªßi ro</h2>
      <ul>
        <li>ƒê·ªô bi·∫øn ƒë·ªông hi·ªán t·∫°i: <b>3.2%</b></li>
        <li>Max Drawdown d·ª± ki·∫øn: <b>-8.6%</b></li>
        <li>Khuy·∫øn ngh·ªã v·ªën t·ªëi ƒëa: <b>25%</b></li>
      </ul>
    </section>

    <section id="macro" class="tab-content">
      <h2>üåç Macro AI ‚Äì Chu k·ª≥ & D√≤ng ti·ªÅn</h2>
      <p>DXY gi·∫£m nh·∫π, SP500 ƒëi ngang, On-chain inflow gi·∫£m 4%. T√≠n hi·ªáu ‚ÄúRisk-On‚Äù.</p>
      <img src="https://www.tradingview.com/x/bC6TgR9u/" alt="macro chart" class="demo-img" />
    </section>

    <section id="advisor" class="tab-content">
      <h2>üß† Advisor LLM ‚Äì Ph·∫£n bi·ªán & T∆∞ duy</h2>
      <div class="chat-box">
        <div class="msg ai">Quant AI: X√°c su·∫•t tƒÉng 68%.</div>
        <div class="msg ai">Sentiment AI: T√¢m l√Ω ƒëang c·∫£i thi·ªán.</div>
        <div class="msg human">B·∫°n: Xem l·∫°i correlation gi·ªØa DXY v√† BTC tu·∫ßn n√†y.</div>
        <div class="msg ai">Advisor: Correlation -0.45 ‚áí h·ªó tr·ª£ tƒÉng gi√°.</div>
      </div>
    </section>

    <section id="console" class="tab-content">
      <h2>üíª AI Console</h2>
      <textarea id="aiInput" placeholder="Nh·∫≠p l·ªánh ho·∫∑c c√¢u h·ªèi cho AI..."></textarea>
      <button id="runAI">G·ª≠i</button>
      <div id="aiOutput"></div>
    </section>

    <section id="report" class="tab-content">
      <h2>üìë B√°o c√°o & Xu·∫•t PDF</h2>
      <p>B·∫•m n√∫t b√™n d∆∞·ªõi ƒë·ªÉ t·∫°o b√°o c√°o PDF.</p>
      <button id="exportPDF">Xu·∫•t b√°o c√°o</button>
    </section>

  </main>

  <footer>
    <p>Hanoi Center for Financial and Technology Analytics ¬© 2025 | Designed by Thanh Le</p>
    <p>Li√™n h·ªá: <a href="facebook.com">Facebook</a></p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="script.js"></script>
</body>
</html>